{"version":3,"file":"Modal.js","sourceRoot":"","sources":["Modal.ts"],"names":[],"mappings":"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","sourcesContent":["import { NeuApp } from \"./App.js\"\r\nimport { runApp } from \"../Neupica2.js\"\r\nimport { NeuRow } from \"../../Layout/NeuRow.js\"\r\nimport { CommonButton } from \"../Components/Custom/Material3/Components/Actions/Common Buttons/CommonButton.js\"\r\nimport { NeuModalRender, NeuRender } from \"./Render.js\"\r\nimport { NeuLayout } from \"../../Layout/NeuLayout.js\"\r\nimport { NeuContainer } from \"../Components/Native/NeuContainer.js\"\r\nimport { Native } from \"../Components/Native/Native\"\r\n\r\nexport class Modal extends NeuApp {\r\n    // layers: NeuContainer[]\r\n    layers: NeuContainer[]\r\n    constructor() {\r\n        super()\r\n        this.layout = new NeuRow()\r\n        this.layout.geometry.ZIndex = '9999'\r\n        if (this.layout.element) {\r\n            this.layout.element.style.pointerEvents = 'none'\r\n        }\r\n        this.layout.geometry.Width = '100vw'\r\n        this.layout.geometry.Height = '100vh'\r\n        this.layout.data.FlexDirection = 'column'\r\n        this.layout.geometry.Position = 'absolute'\r\n        // this.layout.data.JustifyContent = 'center'\r\n        // this.layout.data.AlignItems = 'center'\r\n\r\n        this.layers = []\r\n\r\n        this.addQueue({\r\n            command: 'f',\r\n            arguments: [function() {\r\n                \r\n                this.dom = document.querySelector('body')\r\n                this.dom.prepend(this.app)\r\n                NeuModalRender(this, this.layout, this.app, false)\r\n            }.bind(this)],\r\n        })\r\n    }\r\n\r\n    createLayer(): NeuContainer {\r\n        let layer = new NeuContainer()\r\n        if (layer.element) {\r\n            layer.element.style.pointerEvents = 'none'\r\n        }\r\n        layer.geometry.Width = '100%'\r\n        layer.geometry.Height = '100%'\r\n        layer.data.FlexDirection = 'column'\r\n        layer.geometry.Position = 'absolute'\r\n        // layer.data.JustifyContent = 'center'\r\n        // layer.data.AlignItems = 'center'\r\n        this.layers.push(layer)\r\n        return layer\r\n    }\r\n\r\n    getLayer(element: Native) {\r\n        if (this.layout instanceof NeuLayout) {\r\n            for (let layer of this.layers) {\r\n                if (layer.children.indexOf(element) > -1) {\r\n                    return layer\r\n                }\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n    addModal(element: Native) {\r\n        if (this.layout instanceof NeuLayout) {\r\n            let layer = this.createLayer()\r\n            layer.addChild(element)\r\n            this.layout.addChild(layer)\r\n        }\r\n    }\r\n\r\n    addInteractiveModal(element: Native){\r\n        if (element.cover) {\r\n            element.cover.style.pointerEvents = 'auto'\r\n        }\r\n        this.addModal(element)\r\n    }\r\n\r\n    removeModal(element: Native){\r\n        if (this.layout instanceof NeuLayout) {\r\n            for (let layer of this.layers) {\r\n                if (layer.children.indexOf(element) > -1) {\r\n                    layer.removeChild(element)\r\n                    this.layout.removeChild(layer)\r\n                    let index = this.layers.indexOf(layer)\r\n                    if (index > -1) {\r\n                        this.layers.splice(index, 1)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    clearModal(){\r\n        if (this.layout instanceof NeuLayout) {\r\n            this.layout.clearChildren()\r\n        }\r\n    }\r\n}\r\n\r\nexport function initModal() {\r\n    let modal = new Modal()\r\n    runApp(modal)\r\n    // @ts-ignore\r\n    window.modal = modal\r\n}\r\n\r\n\r\n"]}