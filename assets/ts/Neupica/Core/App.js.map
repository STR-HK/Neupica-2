{"version":3,"file":"App.js","sourceRoot":"","sources":["App.ts"],"names":[],"mappings":"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","sourcesContent":["import { runApp } from \"../Neupica2.js\"\r\nimport { NeuEliminate, NeuRender } from \"./Render.js\"\r\nimport { createUnique } from \"../Components/Create/Create.js\"\r\nimport { NeuLayout } from \"../../Layout/NeuLayout.js\"\r\nimport { Layout } from \"../../Layout/Layout.js\"\r\nimport { NeuScaffold } from \"../../Layout/NeuScaffold.js\"\r\n// import { Object } from \"../../Common/Object.ts\"\r\n\r\nexport class NeuApp {\r\n    layout: undefined | NeuLayout | NeuScaffold\r\n    dom: undefined | HTMLElement\r\n    app: HTMLDivElement\r\n    readonly appCode: string\r\n    readonly renderID: boolean\r\n    queues: any[]\r\n    void: string\r\n    faviconLink: HTMLLinkElement | undefined\r\n    canSolveQueue: any\r\n    private firstContentfullLoad: boolean | undefined\r\n    private waitForLoad: any[]\r\n    documentBody: HTMLElement\r\n\r\n    constructor() {\r\n        this.layout = undefined\r\n        this.dom = undefined\r\n        this.app = this.createApp()\r\n        this.appCode = createUnique()\r\n        this.renderID = false\r\n        this.queues = []\r\n        this.firstContentfullLoad = false\r\n        this.waitForLoad = []\r\n        this.documentBody = document.body\r\n\r\n        this.void = 'ã…¤'\r\n\r\n        Array.from(document.getElementsByTagName('link')).forEach(link => {\r\n            if (link.rel === 'icon') {\r\n                this.faviconLink = link\r\n            } else {\r\n                this.faviconLink = undefined\r\n            }\r\n        })\r\n\r\n\r\n\r\n        // Do not change this manually!\r\n        this.canSolveQueue = false\r\n    }\r\n\r\n    setTitle(title: string) {\r\n        window.document.title = title\r\n    }\r\n\r\n    setVoidTitle() {\r\n        window.document.title = this.void\r\n    }\r\n\r\n    setFavicon(url: string) {\r\n        if (this.faviconLink != undefined) {\r\n            this.faviconLink.href = url\r\n        }\r\n    }\r\n\r\n    setVoidFavicon() {\r\n        if (this.faviconLink != undefined) {\r\n            this.faviconLink.href = this.void\r\n        }\r\n    }\r\n\r\n    setLayout(layout: NeuLayout) {\r\n        this.layout = layout\r\n\r\n    }\r\n\r\n    setFullScreen(bool: boolean) {\r\n        this.layout.element.style.width = '100%'\r\n        this.layout.element.style.height = '100%'\r\n\r\n        if (bool) {\r\n            this.addQueue({\r\n                command: \"f\",\r\n                arguments: [function() {\r\n                    this.app.style.width = window.innerWidth + 'px'\r\n                    this.app.style.height = window.innerHeight + 'px'\r\n                    window.onresize = function() {\r\n                        this.app.style.width = window.innerWidth + 'px'\r\n                        this.app.style.height = window.innerHeight + 'px'\r\n                    }.bind(this)\r\n                }.bind(this)]\r\n            })\r\n\r\n        } else {\r\n            this.addQueue({\r\n                command: \"f\",\r\n                arguments: [function() {\r\n                    this.app.style.width = \"\" + 'px'\r\n                    this.app.style.height = \"\"\r\n                    window.onresize = function() {}\r\n                }.bind(this)]\r\n            })\r\n            // this.app.style.width = ''\r\n            // this.app.style.height = ''\r\n        }\r\n    }\r\n\r\n    createApp() {\r\n        let app = document.createElement(\"div\")\r\n        app.id = Object.getPrototypeOf(this).constructor.name\r\n        app.className = \"NeuApp\"\r\n        return app\r\n    }\r\n\r\n    draw(where: string) {\r\n        this.addQueue({\r\n            command: 'draw',\r\n            arguments: [where],\r\n        })\r\n    }\r\n\r\n    sculpt(parentElement: HTMLElement) {\r\n        this.addQueue({\r\n            command: 'sculpt',\r\n            arguments: [parentElement],\r\n        })\r\n    }\r\n\r\n    erase() {\r\n        NeuEliminate(this, this.layout, this.app, false)\r\n    }\r\n\r\n    addQueue(queue: object) {\r\n        this.queues.push(queue)\r\n        if (this.canSolveQueue) {\r\n            this.solveQueues()\r\n        }\r\n    }\r\n\r\n    solveQueues() {\r\n        if (this.queues.length > 0) {\r\n            this.queues.forEach(queue => {\r\n                if (this.layout === undefined) {\r\n                    console.error(\"layout is not defined\")\r\n                } else {\r\n                    if (queue['command'] === 'draw') {\r\n                        let where = queue['arguments'][0]\r\n                        this.dom = document.querySelector(where)\r\n                        if (this.dom !== undefined) {\r\n                            this.dom.appendChild(this.app)\r\n                        }\r\n                        NeuRender(this, this.layout, this.app, false)\r\n                    }\r\n                    if (queue['command'] === 'sculpt') {\r\n                        let parentElement = queue['arguments'][0]\r\n                        this.dom = parentElement\r\n                        if (this.dom !== undefined) {\r\n                            this.dom.appendChild(this.app)\r\n                        }\r\n                        NeuRender(this, this.layout, this.app, true)\r\n                    }\r\n                }\r\n                if (queue['command'] === 'f' ||\r\n                    queue['command'] === 'func' ||\r\n                    queue['command'] === 'function'\r\n                    ) {\r\n                    queue['arguments'][0]()\r\n                    return true\r\n                }\r\n            })\r\n            this.queues = []\r\n        }\r\n        if (!this.firstContentfullLoad) {\r\n            this.firstContentfullLoad = true\r\n        } else {\r\n            this.firstContentfullLoad = undefined\r\n        }\r\n        this.runWaitingEvents()\r\n\r\n    }\r\n\r\n    addWaitForEvent(callback: Function) {\r\n        this.waitForLoad.push(callback)\r\n        this.runWaitingEvents()\r\n    }\r\n\r\n    runWaitingEvents() {\r\n        if (this.firstContentfullLoad) {\r\n            this.waitForLoad.forEach(cb => {\r\n                cb()\r\n            })\r\n            this.waitForLoad = []\r\n        }\r\n    }\r\n}\r\n\r\n"]}